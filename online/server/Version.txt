Restructured session management + other QOL things